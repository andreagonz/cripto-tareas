%Especificacion
\documentclass[14pt]{article}

%Paquetes
\usepackage[left=2cm,right=2cm,top=3cm,bottom=3cm,letterpaper]{geometry}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[spanish,activeacute]{babel}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{enumerate}
%\usepackage{tabularx}
%\usepackage{wasysym}
\usepackage{graphicx}
%\graphicspath { {tarea01/media/} }
%\usepackage{pifont}
\usepackage{titlesec}
\usepackage{enumitem}
%\usepackage{coloremoji}
%Preambulo
\title{Criptograf√≠a y seguridad \\ Tarea 4}
\author{Andrea Itzel Gonz√°lez Vargas \\ Carlos Gerardo Acosta Hern√°ndez}
\date{Entrega: 27/04/17 \\ Facultad de Ciencias UNAM}

\titleformat*{\subsubsection}{}
\setlength\parindent{0pt}

\begin{document}
\maketitle

\subsubsection*{1. Chon Hacker est√° harto de que le llegue mucha publicidad a su correo electr√≥nico. Por esto ha decidido crear un filtro para abrir solamente los correos de sus amigos. El m√©todo consiste en lo siguiente:}
\begin{itemize}
\item Escoge dos emojis, $a$ y $b$, y se los manda a sus amigos.
\item Solo aceptar√° aquellos mensajes que inicien con una cadena $x$, donde esta cadena satisface la igualdad SHA256($a \parallel x$) = $b \parallel loquesea$.
\end{itemize}

\begin{enumerate}[label=\alph*)]
\item ¬øC√≥mo encuentras una $x$ para enviar un mensaje ¬´leg√≠timo¬ª a Chon Hacker? \\ \\
\textbf{R:} Se itera por el espacio de mensajes posibles que empiezan con $a$. Como SHA256 acepta mensajes de longitud menor a $2^{64}$, entonces hay $\sum_{i = 0}^{63} 2^i$ mensajes posibles en total, sin embargo solo estamos tomando en cuenta los que empiezan con $a$, ya que $a$ es un emoji, ocupa 4 bytes de espacio (32 bits), por lo que nuestro espacio de mensajes posibles se reduce a $\sum_{i = 0}^{31} 2^i$. Por cada uno de estos mensajes $x$ posibles se obtiene el hash $h$ = SHA256($a \parallel x$)  y se verifica si $h$ comienza con $b$.

\item ¬øEs necesario que Chon cambie $a$ y $b$ regularmente o pueden quedarse fijos? Explica. \\ \\
  \textbf{R:}  
  
\item Estima cu√°ntas operaciones tiene que hacer alguien para enviar un mensaje. (Aplicar SHA256 cuenta como operaci√≥n b√°sica.) \\ \\
  \textbf{R:}
  Para determinar cu√°ntas operaciones es necesario realizar, debemos saber qu√© tanto del espacio de mensajes debemos explorar para encontrar una $x$ apropiada que cumpla la restricci√≥n de Chon Hacker.
  Comencemos por determinar el
  tama√±o del subconjunto de mensajes $N \subset M$, ($M$ el espacio de mensajes) tal que $emoji_a || x \in N$. Lo consideramos un subconjunto
  propio dado que la cantidad de bits en $x$ no puede superar los $2^{64-32}$, pues el \textit{emoji}
  que nos ha proporcionado nuestro amigo Chon Hacker para la entrada en la funci√≥n de hash toma 4 $bytes$ (32 $bits$), por tanto, la cantidad de combinaciones posibles en $N$ es menor que en $M$.\\
  
  Similarmente a \textbf{1.a)}, podemos calcular la cardinalidad del conjunto $N$ como:
  \begin{equation}
    |M| = \sum_{i = 0}^{63} 2^i
  \end{equation}
  \begin{equation}
    |N| = \sum_{i = 0}^{i = (64-32)-1}2^i = \sum_{i = 0}^{i = 31}2^i
  \end{equation}
  Luego, si contamos la concatenaci√≥n de $x$ con el $emoji_a$ como una de las operaciones a realizar, igualmente el c√°lculo de la funci√≥n hash y adem√°s la comparaci√≥n de los primeros cuatro $bytes$
  del resultado con el $emoji_b$, tenemos que el n√∫mero total de operaciones a realizar en el
  peor de los casos ser√°:
  \begin{equation}
    3 \cdot (|N| - 1)
  \end{equation}
  Pues se deben realizar las tres operaciones mencionadas, por cada $x$ posible. Si ninguna de
  las |N|-1 $x$ resultaron adecuadas para cumplir la condici√≥n de Chon Hacker, idealmente, deber√≠a
  encontrarse en la restante.\\
  
  A pesar de haber obtenido este resultado, no estamos del todo seguros que incluso despu√©s de este n√∫mero de operaciones encontraremos la $x$ que buscamos. Consideremos el conjunto de los mensajes tal que al aplicar la funci√≥n hash sobre ellos, resulta en las cadenas que Chon Hacker tiene planeado aceptar, i.e., $emoji_b || loquesea$, al que llamaremos $B$. Para calcular su tama√±o, consideremos primero la cardinalidad de nuestro espacio total de mensajes $M$, dividido entre el tama√±o del codominio de la funci√≥n de hash; este resultado, refiere nada m√°s que al n√∫mero de mensajes que corresponden a cada posible hash en el codominio de la funci√≥n (total de colisiones por mensaje). F√≠jemonos tambi√©n en el n√∫mero de posibles
  combinaciones existentes para $emoji_b || loquesea$, donde $loquesea$ tiene una longitud de 256-32 $bits$, pues $emoji_b$ ocupa ya 32 bits del mensaje. Al tener estos 32 $bits$ fijos, s√≥lo nos interesa
  contar la variaci√≥n en los 224 restantes, que en su total es $2^{224}$. Para cada uno de estos mensajes, existe un n√∫mero igual (pues se distribuyen uniformemente) de elementos en el codominio de la funci√≥n hash que le corresponde. El tama√±o de nuestro conjunto $B$ estar√° dado entonces por:
  \begin{equation}
    |B| = 2^{224} \cdot \frac{|M|}{2^{256}}
  \end{equation}
  Considerando el tama√±o de los conjuntos $M$, $N$ y $B$, si restamos $|M| - |B|$, obtendremos que:
  \begin{equation}
    \sum_{i = 0}^{i = 31}2^i - (2^{224} \cdot \frac{\sum_{i = 0}^{i = 31}2^i}{2^{256}}) = \sum_{i = 0}^{i = 31}2^i}\cdot (1-\frac{2^{224}}{2^{256}}) = \sum_{i = 0}^{i = 31}2^i}\cdot (1-\frac{1}{2^{32}})
  \end{equation}
  Comparando este resultado con $|N|$, podemos ver que (5) es mayor que (2), lo que nos lleva a considerar que dentro del conjunto $M$, cabe la posibilidad de que sus subconjuntos $N$ y $B$ sean ajenos, es decir, que
  $N \cap B = \varnothing$. Hab√≠amos dicho que $B \subseteq M$ refer√≠a a los mensajes que pod√≠an llegar al conjunto de mensajes que Chon Hacker estaba dispuesto a aceptar, sin embargo $N$ refer√≠a a los
  mensajes que ten√≠amos disponibles para elegir, en caso de ser ajenos, a pesar de ejecutar todas las
  operaciones que calculamos, no encontrar√≠amos una cadena $x$ adecuada para que nuestro mensaje pueda ser recibido por nuestro receptor.
\item Haz un programa para encontrar $x$ si $a$ = üòÑ, $b$ = üòè. Cuenta las operaciones que fueron necesarias y compara con la estimaci√≥n anterior. Guarda $x$ en forma hexadecimal como texto, con los bytes separados por un espacio. \\ \\
  \textbf{R:}  
  
\item ¬øSeguir√≠a funcionando este m√©todo si ahora $b$ son dos emojis? ¬øY si $a$ son dos emojis? \\ \\
  \textbf{R:}
\end{enumerate}

\subsubsection*{6. Investiga c√≥mo funciona BitTorrent. Describe c√≥mo y para qu√© se usa SHA1 en la creaci√≥n de archivos torrent. Existe la posibilidad de usar una estructura llamada √°rbol de Merkle, explica c√≥mo se puede usar en BitTorrent y por qu√© es √∫til.}
\textbf{R:} 
\subsubsection*{7. Este problema trata sobre c√≥mo construir una funci√≥n hash a partir de ir formando caminos sobre gr√°ficas.}
  Sea $G$ una gr√°fica no dirigida 3-regular con $n$ v√©rtices, adem√°s conexa y posiblemente con loops o multiaristas. Cada v√©rtice es un elemento de $\{1, ... , n\}$. Se escoge un v√©rtice $s \in V (G)$ y se establece como el v√©rtice de inicio. Se usar√° un or√°culo $\mathcal{O}$ que en todo momento ¬´sabe¬ª los movimientos que se han hecho. Para construir una funci√≥n $h : \{0, 1\}^N \rightarrow \{1, ... , n\}$ se procede como sigue: con una entrada $x = b_1 b_2 ... b_N$ , primero nos paramos en $s$, se le da $b_1$ a $\mathcal{O}$ y nos contesta hacia cu√°l de los vecinos de $s$ hay que moverse dependiendo del valor de $b_1$, nos movemos hacia ese vecino, ahora le damos $b_2$ al or√°culo y nos dir√° hacia donde movernos, solo que nunca regresaremos al v√©rtice por donde llegamos, seguimos este proceso hasta tener un camino de tama√±o $N$ que empieza en $s$ y termina en un v√©rtice $t$, y este n√∫mero $t$ ser√° la salida, es decir, $h(x) = t$. \\
\textbf{R:} 
\end{document}
